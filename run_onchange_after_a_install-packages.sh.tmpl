{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash

mkdir -p ~/bin

sudo apt-get update
sudo apt-get install -y build-essential tmux fish fzf ripgrep jq zip unzip fd-find
sudo snap install --classic nvim

# fd
rm -f ~/bin/fd
ln -s $(which fdfind) ~/bin/fd

# yazi
YAZI_VERSION=$(curl -s "https://api.github.com/repos/sxyazi/yazi/releases/latest" | grep -Po '"tag_name": "v\K[^"]*')
curl -Lo /tmp/yazi.zip https://github.com/sxyazi/yazi/releases/download/${YAZI_VERSION}/yazi-x86_64-unknown-linux-gnu.zip
unzip -o /tmp/yazi.zip -d /tmp
mv /tmp/yazi-x86_64-unknown-linux-gnu/yazi ~/bin/yazi

# lazygit
LAZYGIT_VERSION=$(curl -s "https://api.github.com/repos/jesseduffield/lazygit/releases/latest" | grep -Po '"tag_name": "v\K[^"]*')
curl -Lo /tmp/lazygit.tar.gz "https://github.com/jesseduffield/lazygit/releases/latest/download/lazygit_${LAZYGIT_VERSION}_Linux_x86_64.tar.gz"
tar xvfz /tmp/lazygit.tar.gz -C ~/bin lazygit

{{ else if eq .chezmoi.os "darwin" -}}
#!/bin/bash

mkdir -p ~/bin

brew bundle --no-lock --file=/dev/stdin <<EOF
brew "git"
EOF
{{ end -}}
